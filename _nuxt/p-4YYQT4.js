import{g as y,r as l,j as h,k,c as v,o as d,n as _,l as C,a as n,d as m,_ as P,s as S,m as $,p as j,q as E,v as a,b as U,w as B}from"./ClqIKUm5.js";import{u as F}from"./lY4ixX4L.js";import{_ as V}from"./9DMz08vQ.js";/* empty css        */const A=y({__name:"index",props:{src:{},config:{default:()=>({})},width:{default:"100%"},height:{default:"100%"}},setup(p){const t=p,f=l(null),s=l(null),r=l(null),u={...{},...t.config};h(()=>{if(window.RufflePlayer){c();return}const e=document.createElement("script");e.src="https://unpkg.com/@ruffle-rs/ruffle",e.async=!0,e.onload=()=>{window.RufflePlayer=window.RufflePlayer||{},window.RufflePlayer.config=u,c()},s.value=e,document.body.appendChild(e)});const c=()=>{if(!(!f.value||!window.RufflePlayer))try{const e=window.RufflePlayer.newest();r.value=e.createPlayer(),Object.keys(t.config).length>0&&(r.value.config=t.config,console.log("Ruffle player config:",t.config)),f.value.appendChild(r.value),r.value.load({url:t.src,autoplay:!0,...t.config}).then(()=>{console.log("Ruffle player loaded successfully")}).catch(i=>{console.error("Error loading Ruffle player:",i)})}catch(e){console.error("Error creating Ruffle player:",e)}};return k(()=>{r.value&&typeof r.value.destroy=="function"&&r.value.destroy(),s.value&&document.body.contains(s.value)&&document.body.removeChild(s.value)}),(e,i)=>(d(),v("div",{ref_key:"ruffleContainer",ref:f,class:"ruffle-player-container",style:_({width:typeof e.width=="number"?`${e.width}px`:e.width,height:typeof e.height=="number"?`${e.height}px`:e.height})},[C(e.$slots,"default",{},()=>[i[0]||(i[0]=n("p",null,[m(" Your browser doesn't support Flash content. "),n("a",{href:"https://ruffle.rs/",target:"_blank",rel:"noopener noreferrer"}," See Ruffle documentation "),m(" for more information. ")],-1))],!0)],4))}}),I=P(A,[["__scopeId","data-v-f016cc3f"]]),T=""+new URL("ajclient.BxDfrvMs.swf",import.meta.url).href,L={class:"flex flex-col items-center justify-center min-h-screen bg-white p-4"},N={class:"w-full max-w-5xl bg-white shadow-lg rounded-lg overflow-hidden"},O={class:"mt-6 w-full max-w-5xl bg-white shadow-lg rounded-lg p-6"},W=y({__name:"game",setup(p){const t=F(),{username:f,token:s}=S(t),r=l(""),w=l(null);let u=l({});const c=l(!1),e=l(""),i=l(`${window.location.origin}/`);return h(async()=>{if(!t.username||!t.token){$("/play");return}const g=window.location.protocol==="https:"?"wss:":"ws:";e.value=`${g}//${window.location.host}/socket-proxy?screen_name=${f.value}&token=${s.value}`;const o=await t.flashVars();if(o){o.content=`${window.location.origin}/proxy`,o.smartFoxServer="127.0.0.1",o.socketPolicyPort="443",o.clientURL=`${window.location.origin}/proxy/1713/ajclient.swf`,o.clientPlatformVersion="1.5.4",o.clientPlatform="electron",o.country="GB",o.df="0",o.locale="en";const b=Object.entries(o).map(([R,x])=>`${encodeURIComponent(R)}=${encodeURIComponent(x)}`).join("&");u.value=b,c.value=!0}else r.value="Failed to load flashvars. Please try again."}),(g,o)=>(d(),v("div",L,[n("div",N,[n("div",{ref_key:"gameContainer",ref:w,class:"h-[700px] w-full bg-black"},[a(c)?(d(),j(a(I),{key:0,src:a(T),width:"100%",height:"100%",config:{autoplay:!0,quality:"high",scale:"exactfit",wmode:"direct",preferredRender:"webgpu",menu:"false",base:a(i),parameters:a(u),socketProxy:[{host:"127.0.0.1",port:443,proxyUrl:a(e)}],logLevel:"none",showSwfDownload:!1,warnOnUnsupportedContent:!1,hideErrors:!0,letterbox:"off",allowScriptAccess:"always",maxExecutionDuration:300,frameRate:45,useWebWorker:!0,wasmLoadStrategy:"fetch",splashScreen:!1,unmuteOverlay:"hidden",upgradeToHttps:!1,salign:"tl",align:"middle",allowFullScreen:!0,allowFullScreenInteractive:!0,forceScale:!0,backgroundColor:"#000000",traceEnabled:!1,logActionScript:!1,playerRuntime:"air"}},null,8,["src","config"])):E("",!0)],512)]),n("div",O,[o[1]||(o[1]=n("h2",{class:"text-lg font-bold mb-2"},"Playing Animal Jam with Ruffle",-1)),o[2]||(o[2]=n("p",{class:"text-gray-600 mb-4"}," This is an experimental feature that allows you to play Animal Jam Classic in your browser using Ruffle, an open-source Flash Player emulator. ",-1)),U(a(V),{color:"black",icon:"info-circle"},{default:B(()=>o[0]||(o[0]=[m(" Some features may not work correctly as Ruffle is still in development. ")])),_:1,__:[0]})])]))}});export{W as default};
